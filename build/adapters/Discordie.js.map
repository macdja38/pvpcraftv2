{"version":3,"sources":["../../src/adapters/Discordie.js"],"names":["DiscordieAdapter","constructor","configJSON","adapterSettings","_configJSON","_adapterSettings","_client","adapter","name","login","connect","token","auth","reconnect","startEvents","Dispatcher","on","console","log","User","username","e","_commandHandler","onMessage","DiscordieMessage","message","author","content","data","getChanges","before","after","guild","DiscordieGuild","_message","DiscordieUser"],"mappings":"AAAA;;;;AAIA;;;;;;AACA;;AACA;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;AAEe,MAAMA,gBAAN,2BAAuC;AACpDC,cAAY,EAACC,UAAD,EAAaC,eAAb,EAAZ,EAA2C;AACzC;AACA;AACA,SAAKC,WAAL,GAAmBF,UAAnB;AACA,SAAKG,gBAAL,GAAwBF,eAAxB;AACA,SAAKG,OAAL,GAAe,yBAAf;AACD;;AAED,MAAIC,OAAJ,GAAc;AACZ,WAAO,WAAP;AACD;;AAED,aAAWC,IAAX,GAAkB;AAChB,WAAO,WAAP;AACD;;AAEKC,OAAN,GAAc;AAAA;;AAAA;AACZ,YAAM,MAAKH,OAAL,CAAaI,OAAb,CAAqB;AACzBC,eAAO,MAAKN,gBAAL,CAAsBO,IAAtB,CAA2BD,KADT;AAEzBE,mBAAW;AAFc,OAArB,CAAN;AAIA,YAAKC,WAAL;AALY;AAMb;;AAEDA,gBAAc;AACZ,SAAKR,OAAL,CAAaS,UAAb,CAAwBC,EAAxB,CAA2B,eAA3B,EAA4C,MAAM;AAChD;AACAC,cAAQC,GAAR,CAAa,kBAAgB,KAAKZ,OAAL,CAAaa,IAAb,CAAkBC,QAAS,GAAxD;AACA;AACD,KAJD;;AAMA,SAAKd,OAAL,CAAaS,UAAb,CAAwBC,EAAxB,CAA2B,gBAA3B,EAA6CK,KAAK;AAChD,WAAKC,eAAL,CAAqBC,SAArB,CAA+B,IAAIC,gBAAJ,CAAqBH,CAArB,CAA/B;AACAJ,cAAQC,GAAR,CAAa,cAAY,KAAKZ,OAAL,CAAaa,IAAb,CAAkBC,QAAS,MAAGC,EAAEI,OAAF,CAAUC,MAAV,CAAiBN,QAAS,MAAGC,EAAEI,OAAF,CAAUE,OAAQ,GAAtG;AACD,KAHD;;AAKA,SAAKrB,OAAL,CAAaS,UAAb,CAAwBC,EAAxB,CAA2B,mBAA3B,EAAgDK,KAAK;AACnDJ,cAAQC,GAAR,CAAYG,CAAZ,EADmD,CACnC;AAChB,YAAMO,OAAOP,EAAEQ,UAAF,EAAb;AACAZ,cAAQC,GAAR,CAAYU,KAAKE,MAAjB,EAHmD,CAGzB;AAC1Bb,cAAQC,GAAR,CAAYU,KAAKG,KAAjB,EAJmD,CAI1B;AAC1B,KALD;AAMD;AA3CmD;;kBAAjC/B,gB;AA8CrB,MAAMwB,gBAAN,2BAAuC;AACrCvB,cAAY,EAACwB,OAAD,EAAZ,EAAuB;AACrB,UAAMA,OAAN;AACD;;AAED,MAAIlB,OAAJ,GAAc;AACZ,WAAO,WAAP;AACD;;AAED,MAAIyB,KAAJ,GAAY;AACV,WAAO,IAAIC,cAAJ,CAAmB,KAAKC,QAAL,CAAcF,KAAjC,CAAP;AACD;;AAED,MAAIL,OAAJ,GAAc;AACZ,WAAO,KAAKO,QAAL,CAAcP,OAArB;AACD;;AAED,MAAID,MAAJ,GAAa;AACX,WAAO,IAAIS,aAAJ,CAAkB,KAAKD,QAAL,CAAcR,MAAhC,CAAP;AACD;AAnBoC;;AAsBvC,MAAMO,cAAN,yBAAmC;AACjChC,cAAY+B,KAAZ,EAAmB;AACjB,UAAMA,KAAN;AACD;AAHgC;;AAMnC,MAAMG,aAAN,wBAAiC;AAC/BlC,cAAY+B,KAAZ,EAAmB;AACjB,UAAMA,KAAN;AACD;AAH8B","file":"Discordie.js","sourcesContent":["/**\n * Created by macdja38 on 2016-09-18.\n */\n\n\"use strict\";\nimport \"babel-core/register\";\nimport \"source-map-support/register\";\n\nimport Adapter from \"./Adapter\";\nimport Discordie from \"discordie\";\nimport Message from \"../events/Message\";\nimport Guild from \"../events/Guild\";\nimport User from \"../events/User\";\n\nexport default class DiscordieAdapter extends Adapter {\n  constructor({configJSON, adapterSettings}) {\n    super();\n    //noinspection JSUnresolvedVariable\n    this._configJSON = configJSON;\n    this._adapterSettings = adapterSettings;\n    this._client = new Discordie();\n  }\n\n  get adapter() {\n    return \"discordie\"\n  }\n\n  static get name() {\n    return \"discordie\";\n  }\n\n  async login() {\n    await this._client.connect({\n      token: this._adapterSettings.auth.token,\n      reconnect: true\n    });\n    this.startEvents();\n  }\n\n  startEvents() {\n    this._client.Dispatcher.on(\"GATEWAY_READY\", () => {\n      /* eslint-disable */\n      console.log(`Connected as: ${this._client.User.username}`);\n      /* eslint-enable */\n    });\n\n    this._client.Dispatcher.on(\"MESSAGE_CREATE\", e => {\n      this._commandHandler.onMessage(new DiscordieMessage(e));\n      console.log(`discordie ${this._client.User.username} ${e.message.author.username} ${e.message.content}`);\n    });\n\n    this._client.Dispatcher.on(\"GUILD_ROLE_UPDATE\", e => {\n      console.log(e); //eslint-disable-line no-console\n      const data = e.getChanges();\n      console.log(data.before); //eslint-disable-line no-console\n      console.log(data.after); //eslint-disable-line no-console\n    });\n  }\n}\n\nclass DiscordieMessage extends Message {\n  constructor({message}) {\n    super(message);\n  }\n\n  get adapter() {\n    return \"discordie\"\n  }\n\n  get guild() {\n    return new DiscordieGuild(this._message.guild);\n  }\n\n  get content() {\n    return this._message.content;\n  }\n\n  get author() {\n    return new DiscordieUser(this._message.author);\n  }\n}\n\nclass DiscordieGuild extends Guild {\n  constructor(guild) {\n    super(guild);\n  }\n}\n\nclass DiscordieUser extends User {\n  constructor(guild) {\n    super(guild);\n  }\n}"]}