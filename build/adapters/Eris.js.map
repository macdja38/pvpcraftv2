{"version":3,"sources":["../../src/adapters/Eris.js"],"names":["ErisAdapter","constructor","configJSON","adapterSettings","_event","_configJSON","_adapterSettings","_client","auth","token","name","login","on","console","error","e","log","connect","startEvents","user","username","message","_commandHandler","onMessage","ErisMessage","author","content","client","adapter","guild","ErisGuild","_message","ErisUser","channel","reply","string","args","createMessage","id","mention"],"mappings":";;;;;;AAIA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;2cARA;;;;AAUe,MAAMA,WAAN,2BAAkC;AAC/CC,cAAY,EAACC,UAAD,EAAaC,eAAb,EAAZ,EAA2C;AACzC;AACA;AACA,SAAKC,MAAL,GAAc,uBAAd;AACA,SAAKC,WAAL,GAAmBH,UAAnB;AACA,SAAKI,gBAAL,GAAwBH,eAAxB;AACA,SAAKI,OAAL,GAAe,mBAAY,KAAKD,gBAAL,CAAsBE,IAAtB,CAA2BC,KAAvC,CAAf;AACD;;AAED,aAAWC,IAAX,GAAkB;AAChB,WAAO,MAAP;AACD;;AAEKC,OAAN,GAAc;AAAA;;AAAA;AACZ,YAAKJ,OAAL,CAAaK,EAAb,CAAgB,OAAhB,EAAyB;AAAA,eAAKC,QAAQC,KAAR,CAAc,YAAd,EAA4BC,CAA5B,CAAL;AAAA,OAAzB;AACAF,cAAQG,GAAR,CAAY,MAAKX,WAAjB;AACA,YAAM,MAAKE,OAAL,CAAaU,OAAb,EAAN;AACA,YAAKC,WAAL;AAJY;AAKb;;AAEDA,gBAAc;AACZ,SAAKX,OAAL,CAAaK,EAAb,CAAgB,OAAhB,EAAyB,MAAM;AAC7B;AACAC,cAAQG,GAAR,CAAa,kBAAgB,KAAKT,OAAL,CAAaY,IAAb,CAAkBC,QAAS,GAAxD;AACA;AACD,KAJD;;AAMA,SAAKb,OAAL,CAAaK,EAAb,CAAgB,eAAhB,EAAiCS,WAAW;AAC1C,WAAKC,eAAL,CAAqBC,SAArB,CAA+B,IAAIC,WAAJ,CAAgBH,OAAhB,EAAyB,KAAKd,OAA9B,CAA/B;AACAM,cAAQG,GAAR,CAAa,SAAO,KAAKT,OAAL,CAAaY,IAAb,CAAkBC,QAAS,MAAGC,QAAQI,MAAR,CAAeL,QAAS,MAAGC,QAAQK,OAAQ,GAA7F;AACD,KAHD;AAID;AAhC8C;;kBAA5B1B,W;AAmCrB,MAAMwB,WAAN,2BAAkC;AAChCvB,cAAYoB,OAAZ,EAAqBM,MAArB,EAA6B;AAC3B,UAAMN,OAAN;AACA,SAAKd,OAAL,GAAeoB,MAAf;AACD;;AAED,MAAIC,OAAJ,GAAc;AACZ,WAAO,MAAP;AACD;;AAED,MAAIC,KAAJ,GAAY;AACV,WAAO,IAAIC,SAAJ,CAAc,KAAKC,QAAL,CAAcF,KAA5B,CAAP;AACD;;AAED,MAAIH,OAAJ,GAAc;AACZ,WAAO,KAAKK,QAAL,CAAcL,OAArB;AACD;;AAED,MAAID,MAAJ,GAAa;AACX,WAAO,IAAIO,QAAJ,CAAa,KAAKD,QAAL,CAAcN,MAA3B,CAAP;AACD;;AAED,MAAIE,MAAJ,GAAa;AACX,WAAO,KAAKpB,OAAZ;AACD;;AAED,MAAI0B,OAAJ,GAAc;AACZ,WAAO,KAAKF,QAAL,CAAcE,OAArB;AACD;;AAEDC,QAAMC,MAAN,EAAc,GAAGC,IAAjB,EAAuB;AACrB,WAAO,KAAK7B,OAAL,CAAa8B,aAAb,CAA2B,KAAKN,QAAL,CAAcE,OAAd,CAAsBK,EAAjD,EAAsD,IAAE,KAAKP,QAAL,CAAcN,MAAd,CAAqBc,OAAQ,OAAIJ,MAAO,GAAhG,EAAmG,GAAGC,IAAtG,CAAP;AACD;AAhC+B;;AAmClC,MAAMN,SAAN,yBAA8B;AAC5B7B,cAAY4B,KAAZ,EAAmB;AACjB,UAAMA,KAAN;AACD;AAH2B;;AAM9B,MAAMG,QAAN,wBAA4B;AAC1B/B,cAAYkB,IAAZ,EAAkB;AAChB,UAAMA,IAAN;AACD;;AAED;;;AAL0B","file":"Eris.js","sourcesContent":["/**\n * Created by macdja38 on 2016-09-18.\n */\n\nimport Adapter from \"./Adapter\";\nimport Discord from \"eris\";\nimport Message from \"../events/Message\";\nimport Guild from \"../events/Guild\";\nimport User from \"../events/User\";\n\nexport default class ErisAdapter extends Adapter {\n  constructor({configJSON, adapterSettings}) {\n    super();\n    //noinspection JSUnresolvedVariable\n    this._event = new Message();\n    this._configJSON = configJSON;\n    this._adapterSettings = adapterSettings;\n    this._client = new Discord(this._adapterSettings.auth.token);\n  }\n\n  static get name() {\n    return \"eris\";\n  }\n\n  async login() {\n    this._client.on(\"error\", e => console.error(\"Eris error\", e));\n    console.log(this._configJSON);\n    await this._client.connect();\n    this.startEvents();\n  }\n\n  startEvents() {\n    this._client.on(\"ready\", () => {\n      /* eslint-disable */\n      console.log(`Connected as: ${this._client.user.username}`);\n      /* eslint-enable */\n    });\n\n    this._client.on(\"messageCreate\", message => {\n      this._commandHandler.onMessage(new ErisMessage(message, this._client));\n      console.log(`eris ${this._client.user.username} ${message.author.username} ${message.content}`);\n    });\n  }\n}\n\nclass ErisMessage extends Message {\n  constructor(message, client) {\n    super(message);\n    this._client = client;\n  }\n\n  get adapter() {\n    return \"eris\";\n  }\n\n  get guild() {\n    return new ErisGuild(this._message.guild);\n  }\n\n  get content() {\n    return this._message.content;\n  }\n\n  get author() {\n    return new ErisUser(this._message.author);\n  }\n\n  get client() {\n    return this._client;\n  }\n\n  get channel() {\n    return this._message.channel;\n  }\n\n  reply(string, ...args) {\n    return this._client.createMessage(this._message.channel.id, `${this._message.author.mention}, ${string}`, ...args);\n  }\n}\n\nclass ErisGuild extends Guild {\n  constructor(guild) {\n    super(guild);\n  }\n}\n\nclass ErisUser extends User {\n  constructor(user) {\n    super(user);\n  }\n\n  /* get highestRole() {\n    return this._user.roles.reduce((prev, role) => !prev || role.position > prev.position || (role.position === prev.position && role.id < prev.id) ? role : prev);\n  } */\n}"]}