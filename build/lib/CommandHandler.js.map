{"version":3,"sources":["../../src/lib/CommandHandler.js"],"names":["CommandHandler","constructor","_commands","onMessage","message","userCommand","channel","prefixes","id","clientUser","setLanguage","forEach","c","aliases","indexOf","command","exec","loadModules","modules","_modules","m","objectifyConstructorName","name","loadAllCommands","push","recieveModules","init","slice","toLowerCase"],"mappings":"AAAA;;;AAGA;;;;;;AACA;;AACA;;AAEA;;;;AACA;;;;;;AAEe,MAAMA,cAAN,CAAoB;AACjCC,gBAAc;AACZ,SAAKC,SAAL,GAAiB,EAAjB;AACD;;AAEDC,YAAUC,OAAV,EAAmB;AACjB,QAAIC,cAAc,6BAAM,EAAED,OAAF,EAAWE,SAASF,QAAQE,OAA5B,EAAqCC,UAAU,CAAC,GAAD,CAA/C,EAAsDC,IAAIJ,QAAQK,UAAR,CAAmBD,EAA7E,EAAN,CAAlB;AACAH,gBAAYK,WAAZ,CAAwB,IAAxB;AACA,SAAKR,SAAL,CAAeS,OAAf,CAAuBC,KAAK;AAC1B,UAAIA,EAAEC,OAAF,CAAUC,OAAV,CAAkBT,YAAYU,OAA9B,IAAyC,CAAC,CAA9C,EAAiD;AAC/CH,UAAEI,IAAF,CAAOX,WAAP;AACD;AACF,KAJD;AAKD;;AAEDY,cAAYC,OAAZ,EAAqB;AACnB,SAAKC,QAAL,GAAgB,EAAhB;AACAD,YAAQP,OAAR,CAAgBS,KAAK,KAAKD,QAAL,CAAcE,yBAAyBD,EAAEnB,WAAF,CAAcqB,IAAvC,CAAd,IAA8DF,CAAnF;AACD;;AAEDG,oBAAkB;AAChB,QAAI,CAAC,KAAKJ,QAAV,EAAoB,MAAM,6DAAN;AACpB,SAAKjB,SAAL,GAAiB,EAAjB;AACA,8BAAWS,OAAX,CAAmBC,KAAKA,EAAED,OAAF,CAAUC,KAAK,KAAKV,SAAL,CAAesB,IAAf,CAAoB,IAAIZ,CAAJ,EAApB,CAAf,CAAxB;AACA,SAAKV,SAAL,CAAeS,OAAf,CAAuBC,KAAKA,EAAEa,cAAF,CAAiB,KAAKN,QAAtB,CAA5B;AACA,SAAKjB,SAAL,CAAeS,OAAf,CAAuBC,KAAKA,EAAEc,IAAF,EAA5B;AACD;;AA1BgC;;kBAAd1B,c;AA8BrB,SAASqB,wBAAT,CAAkCC,IAAlC,EAAwC;AACtC,SAAOA,KAAKK,KAAL,CAAW,CAAX,EAAc,CAAd,EAAiBC,WAAjB,KAAiCN,KAAKK,KAAL,CAAW,CAAX,CAAxC;AACD","file":"CommandHandler.js","sourcesContent":["/**\n * Created by macdja38 on 2016-09-20.\n */\n\"use strict\";\nimport \"babel-core/register\";\nimport \"source-map-support/register\";\n\nimport parse from \"./CommandParser\";\nimport Commands from \"../commands\";\n\nexport default class CommandHandler{\n  constructor() {\n    this._commands = [];\n  }\n\n  onMessage(message) {\n    let userCommand = parse({ message, channel: message.channel, prefixes: [\"*\"], id: message.clientUser.id});\n    userCommand.setLanguage(\"en\");\n    this._commands.forEach(c => {\n      if (c.aliases.indexOf(userCommand.command) > -1) {\n        c.exec(userCommand);\n      }\n    });\n  }\n\n  loadModules(modules) {\n    this._modules = {};\n    modules.forEach(m => this._modules[objectifyConstructorName(m.constructor.name)] = m);\n  }\n\n  loadAllCommands() {\n    if (!this._modules) throw \"Modules not loaded yet! Please load modules before commands\";\n    this._commands = [];\n    Commands().forEach(c => c.forEach(c => this._commands.push(new c())));\n    this._commands.forEach(c => c.recieveModules(this._modules));\n    this._commands.forEach(c => c.init());\n  }\n\n}\n\nfunction objectifyConstructorName(name) {\n  return name.slice(0, 1).toLowerCase() + name.slice(1);\n}"]}