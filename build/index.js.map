{"version":3,"sources":["../src/index.js"],"names":["utils","global","Promise","authJSON","fileName","adaptersJSON","console","log","r","require","servers","get","fallback","musicDB","availableAdapters","adaptersArray","e","MusicDB","MusicPlayer","ConfigJSON","videoInfo","adapterSettings","stringThrow","adapter","foundAdapter","find","a","name","push","moduleLoader","commandHandler","loadAll","loadModules","modules","loadAllCommands","register","login"],"mappings":"AAAA;;;AAGA;;AACA;;;;AAGA;;AACA;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AAWA;;IAAYA,K;;AACZ;;;;AACA;;;;AACA;;;;;;;;AAtBAC,OAAOC,OAAP;AACA;;AAIA;;;AAKA;;AAEA,IAAIC,WAAW,yBAAe,EAACC,UAAU,MAAX,EAAf,CAAf;AACA,IAAIC,eAAe,yBAAe,EAACD,UAAU,UAAX,EAAf,CAAnB;AACAE,QAAQC,GAAR,CAAYJ,QAAZ;AACAG,QAAQC,GAAR,CAAYF,YAAZ;;AAEA,IAAIG,IAAIC,QAAQ,eAAR,EAAyB,EAACC,SAAS,CAACP,SAASQ,GAAT,CAAa,oBAAb,EAAmC,EAACC,UAAU,KAAX,EAAnC,CAAD,CAAV,EAAzB,CAAR;;AAOA,IAAIC,UAAU,sBAAYL,CAAZ,CAAd;;AAEA;;AAEA;;AAEA,IAAIM,oBAAoB,yBAAxB;;AAEAR,QAAQC,GAAR,CAAY,mBAAZ,EAAiCO,iBAAjC;;AAEA,IAAIC,gBAAgB,EAApB;;AAEA,IAAIC,IAAI;AACNhB,OADM;AAENa,SAFM;AAGNI,4BAHM;AAINC,oCAJM;AAKNC,kCALM;AAMNhB,UANM;AAONiB,gCAPM;AAQNf,cARM;AASNU;AATM,CAAR;;AAYA,KAAK,IAAIM,eAAT,IAA4BhB,aAAaM,GAAb,CAAiB,UAAjB,EAA6B,EAACW,aAAa,oCAAd,EAA7B,CAA5B,EAA+G;AAC7GhB,UAAQC,GAAR,CAAYc,gBAAgBE,OAA5B;AACAjB,UAAQC,GAAR,CAAYO,kBAAkB,CAAlB,CAAZ;AACA,MAAIU,eAAeV,kBAAkBW,IAAlB,CAAuBC,KAAKA,EAAEC,IAAF,KAAWN,gBAAgBE,OAAvD,CAAnB;AACAjB,UAAQC,GAAR,CAAYiB,YAAZ;AACAT,gBAAca,IAAd,CAAmB,IAAIJ,YAAJ,CAAiB,EAAEH,eAAF,EAAjB,CAAnB;AACD;;AAED,IAAIQ,eAAe,2BAAiBb,CAAjB,CAAnB;;AAEA,IAAIc,iBAAiB,6BAAmBf,aAAnB,CAArB;;AAEAc,aAAaE,OAAb;;AAEAD,eAAeE,WAAf,CAA2BH,aAAaI,OAAxC;;AAEAH,eAAeI,eAAf;;AAEA,KAAK,IAAIX,OAAT,IAAoBR,aAApB,EAAmC;AACjCQ,UAAQY,QAAR,CAAiBL,cAAjB;AACD;;AAED,KAAK,IAAIP,OAAT,IAAoBR,aAApB,EAAmC;AACjCQ,UAAQa,KAAR;AACD","file":"index.js","sourcesContent":["/**\n * Created by macdja38 on 2016-08-07.\n */\n\"use strict\";\nimport Bluebird from \"bluebird\";\nglobal.Promise = Bluebird;\n// Import sources\nimport \"babel-core/register\";\nimport \"source-map-support/register\";\nimport ConfigJSON from \"./utils/configJSON.js\";\n//import Warframe from \"./Warframe\";\nimport adapters from \"./adapters\";\nimport ModuleLoader from \"./lib/ModuleLoader.js\";\nimport CommandHandler from \"./lib/CommandHandler.js\";\n\n// Instantiate Objects\n\nlet authJSON = new ConfigJSON({fileName: \"auth\"});\nlet adaptersJSON = new ConfigJSON({fileName: \"adapters\"});\nconsole.log(authJSON);\nconsole.log(adaptersJSON);\n\nlet r = require(\"rethinkdbdash\")({servers: [authJSON.get(\"database.rethinkdb\", {fallback: false})]});\n\nimport * as utils from \"./utils/utils\";\nimport MusicDB from \"./utils/MusicDB\";\nimport MusicPlayer from \"./utils/MusicPlayer\"\nimport videoInfo from \"./utils/videoInfo\"\n\nlet musicDB = new MusicDB(r);\n\n// End instantiating Objects.\n\n// Start importing adapters\n\nlet availableAdapters = adapters();\n\nconsole.log(\"availableAdapters\", availableAdapters);\n\nlet adaptersArray = [];\n\nlet e = {\n  utils,\n  musicDB,\n  MusicDB,\n  MusicPlayer,\n  ConfigJSON,\n  authJSON,\n  videoInfo,\n  adaptersJSON,\n  adaptersArray,\n};\n\nfor (let adapterSettings of adaptersJSON.get(\"adapters\", {stringThrow: \"adapters not defined in Adapter.js\"})) {\n  console.log(adapterSettings.adapter);\n  console.log(availableAdapters[0]);\n  let foundAdapter = availableAdapters.find(a => a.name === adapterSettings.adapter);\n  console.log(foundAdapter);\n  adaptersArray.push(new foundAdapter({ adapterSettings }));\n}\n\nlet moduleLoader = new ModuleLoader(e);\n\nlet commandHandler = new CommandHandler(adaptersArray);\n\nmoduleLoader.loadAll();\n\ncommandHandler.loadModules(moduleLoader.modules);\n\ncommandHandler.loadAllCommands();\n\nfor (let adapter of adaptersArray) {\n  adapter.register(commandHandler);\n}\n\nfor (let adapter of adaptersArray) {\n  adapter.login();\n}"]}