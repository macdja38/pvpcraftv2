{"version":3,"sources":["../../src/utils/MusicDB.js"],"names":["console","log","musicDB","constructor","r","table","searchCache","videoCache","ensureTable","getAll","args","saveVid","linkHash","link","video","id","insert","run","getVid","hash","get","saveSearch","string","result","timeFetched","Date","now","getSearch"],"mappings":"AAAA;;;AAGA;;;;;;;AACA;;AACA;;AAEA;;;;;;AAEAA,QAAQC,GAAR;;AAEO,MAAMC,OAAN,0BAA6B;AAClCC,cAAYC,CAAZ,EAAe;AACb,UAAMA,CAAN;AACA,SAAKC,KAAL,GAAa,OAAb;AACA,SAAKC,WAAL,GAAmB,aAAnB;AACA,SAAKC,UAAL,GAAkB,YAAlB;AACA,SAAKC,WAAL,CAAiB,OAAjB,EAA0B,EAA1B;AACA,SAAKA,WAAL,CAAiB,KAAKF,WAAtB;AACA,SAAKE,WAAL,CAAiB,KAAKD,UAAtB;AACD;;AAEDE,SAAO,GAAGC,IAAV,EAAgB;AACd,WAAO,KAAKN,CAAL,CAAOC,KAAP,CAAa,KAAKA,KAAlB,EAAyBI,MAAzB,CAAgC,GAAGC,IAAnC,CAAP;AACD;;AAEDC,UAAQC,QAAR,EAAkBC,IAAlB,EAAwBC,KAAxB,EAA+B;AAC7BA,UAAMC,EAAN,GAAWH,QAAX;AACAE,UAAMD,IAAN,GAAaA,IAAb;AACA,WAAO,KAAKT,CAAL,CAAOC,KAAP,CAAa,KAAKE,UAAlB,EAA8BS,MAA9B,CAAqCF,KAArC,EAA4CG,GAA5C,EAAP;AACD;;AAEDC,SAAOC,IAAP,EAAa;AACX,WAAO,KAAKf,CAAL,CAAOC,KAAP,CAAa,KAAKE,UAAlB,EAA8Ba,GAA9B,CAAkCD,IAAlC,EAAwCF,GAAxC,EAAP;AACD;;AAEDI,aAAWC,MAAX,EAAmBC,MAAnB,EAA2B;AACzB,WAAO,KAAKnB,CAAL,CAAOC,KAAP,CAAa,KAAKC,WAAlB,EAA+BU,MAA/B,CAAsC,EAACD,IAAIO,MAAL,EAAaC,QAAQA,MAArB,EAA6BC,aAAaC,KAAKC,GAAL,EAA1C,EAAtC,EAA6FT,GAA7F,EAAP;AACD;;AAEDU,YAAUL,MAAV,EAAkB;AAChB,WAAO,KAAKlB,CAAL,CAAOC,KAAP,CAAa,KAAKC,WAAlB,EAA+Bc,GAA/B,CAAmCE,MAAnC,EAA2CL,GAA3C,EAAP;AACD;AA/BiC;;QAAvBf,O,GAAAA,O;kBAkCEA,O","file":"MusicDB.js","sourcesContent":["/**\r\n * Created by macdja38 on 2016-11-26.\r\n */\r\n\"use strict\";\r\nimport \"babel-core/register\";\r\nimport \"source-map-support/register\";\r\n\r\nimport BaseDB from \"./BaseDB\";\r\n\r\nconsole.log(BaseDB);\r\n\r\nexport class musicDB extends BaseDB {\r\n  constructor(r) {\r\n    super(r);\r\n    this.table = \"queue\";\r\n    this.searchCache = \"searchCache\";\r\n    this.videoCache = \"videoCache\";\r\n    this.ensureTable(\"queue\", {});\r\n    this.ensureTable(this.searchCache);\r\n    this.ensureTable(this.videoCache);\r\n  }\r\n\r\n  getAll(...args) {\r\n    return this.r.table(this.table).getAll(...args);\r\n  }\r\n\r\n  saveVid(linkHash, link, video) {\r\n    video.id = linkHash;\r\n    video.link = link;\r\n    return this.r.table(this.videoCache).insert(video).run();\r\n  }\r\n\r\n  getVid(hash) {\r\n    return this.r.table(this.videoCache).get(hash).run();\r\n  }\r\n\r\n  saveSearch(string, result) {\r\n    return this.r.table(this.searchCache).insert({id: string, result: result, timeFetched: Date.now()}).run();\r\n  }\r\n\r\n  getSearch(string) {\r\n    return this.r.table(this.searchCache).get(string).run();\r\n  }\r\n}\r\n\r\nexport default musicDB;"]}